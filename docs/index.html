<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESG Automation Portfolio Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f8f9fa; }
        h1 { color: #2c3e50; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #2c3e50; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        tr:hover { background-color: #ddd; }
        .summary { margin-top: 15px; color: #555; }
        a { text-decoration: none; color: #007bff; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>ESG Automation Portfolio Dashboard</h1>

    <div id="portfolio-metrics" class="summary"></div>
    <table id="portfolio-table">
        <tr>
            <th>Ticker</th>
            <th>Name</th>
            <th>Weight</th>
            <th>Quantity</th>
            <th>Initial Price</th>
            <th>Last Price</th>
            <th>News</th>
        </tr>
    </table>

    <div class="summary" id="last-updated"></div>

    <script>
        fetch('portfolio.json')
            .then(response => response.json())
            .then(data => {
                // Portfolio Metrics
                const metrics = data.metrics;
                document.getElementById('portfolio-metrics').innerHTML = `
                    <b>CAGR:</b> ${metrics.cagr} | 
                    <b>Total Return (3Y):</b> ${metrics.total_return_3y} | 
                    <b>Max Drawdown:</b> ${metrics.max_drawdown} | 
                    <b>Sharpe Ratio:</b> ${metrics.sharpe_ratio}
                `;

                // Populate Table
                const table = document.getElementById('portfolio-table');
                let rows = '';
                data.holdings.forEach(stock => {
                    rows += `
                    <tr>
                        <td>${stock.ticker}</td>
                        <td>${stock.name}</td>
                        <td>${stock.weight}</td>
                        <td>${stock.quantity}</td>
                        <td>${stock.initial_price}</td>
                        <td>${stock.last_price}</td>
                        <td>${stock.news}</td>
                    </tr>`;
                });
                table.innerHTML = `
                    <tr>
                        <th>Ticker</th><th>Name</th><th>Weight</th><th>Quantity</th>
                        <th>Initial Price</th><th>Last Price</th><th>News</th>
                    </tr>
                    ${rows}
                `;

                // Last Updated
                document.getElementById('last-updated').innerHTML = 
                    `<i>Last Updated: ${new Date(data.last_updated).toLocaleString()}</i>`;
            });
    </script>
</body>
</html>
